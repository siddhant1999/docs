---
title: 'Manual Integration'
description: 'Learn how to integrate Phoenix using vanilla JavaScript'
---

For frameworks other than React or for custom implementations, follow this manual integration guide.

## Step 1: Add the iframe to your HTML

```html
<div id="payment-container" style="display: none;">
  <div class="payment-overlay">
    <div class="payment-modal">
      <button 
        id="cancel-payment-button"
        class="close-button"
        aria-label="Close payment window"
      >
        &times;
      </button>
      <iframe
        id="phoenix-payment-iframe"
        src="https://app-partner.phoenix.market/"
        class="teller-iframe"
        title="Phoenix Payment"
        allow="clipboard-write"
      ></iframe>
    </div>
  </div>
</div>
```

## Step 2: Add Essential CSS

Add this CSS to style the payment container and iframe:

```css
/* Phoenix Payment Styles */
#payment-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1000;
}

.payment-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
}

.payment-modal {
  position: relative;
  background-color: white;
  border-radius: 12px;
  padding: 20px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
}

.close-button {
  position: absolute;
  top: -15px;
  right: -15px;
  background-color: #333;
  color: white;
  border: none;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1;
}

.teller-iframe {
  width: 350px;
  height: 600px;
  border: none;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}
```

## Step 3: Add JavaScript for Communication

You need to add JavaScript functions to handle the integration. Here's a breakdown of what each function does and the required parameters:

### Required and Optional Parameters

Before implementing the integration, you need to collect from your users:

#### Required Parameters
1. **walletAddress**: The Ethereum wallet address where the user wants to receive USDC
2. **amount**: The amount in USD that the user wants to convert to USDC

#### Optional Parameters (for returning users)
1. **accessToken**: The access token obtained from a previous session
2. **accountId**: The account ID obtained from a previous session

You should create a form in your application to collect this information:

```html
<div class="payment-form">
  <div>
    <label for="wallet">Wallet Address:</label>
    <input id="wallet" type="text" placeholder="0x..." />
  </div>
  <div>
    <label for="amount">Amount (USD):</label>
    <input id="amount" type="number" placeholder="100" />
  </div>
  <button id="start-payment">Make Payment</button>
</div>
```

### Core Functions

```javascript
// 1. Function to show payment iframe with parameters
// This function takes the wallet address, amount, and optional parameters, sets up the iframe, and displays it
function showPayment(walletAddress, amount, accessToken, accountId) {
  const iframe = document.getElementById('phoenix-payment-iframe');
  const container = document.getElementById('payment-container');
  
  // Build iframe URL with all parameters
  let url = `https://app-partner.phoenix.market/?address=${walletAddress}&amount=${amount}`;
  
  // Add optional parameters if provided
  if (accessToken) {
    url += `&accessToken=${accessToken}`;
  }
  if (accountId) {
    url += `&accountId=${accountId}`;
  }
  
  // Set iframe src
  iframe.src = url;
  
  // Display the container that holds the iframe
  container.style.display = 'block';
  
  // Set up event listener for messages from the iframe
  window.addEventListener('message', handlePaymentMessage);
  
  // Set up cancel button functionality
  document.getElementById('cancel-payment-button').onclick = hidePayment;
}

// 2. Function to handle messages received from the iframe
// This processes payment completions and failures
function handlePaymentMessage(event) {
  // IMPORTANT: Verify origin for security to prevent cross-site scripting attacks
  // This should match the domain where your Phoenix payment iframe is hosted
  if (event.origin !== 'https://app-partner.phoenix.market') return;
  
  // Handle Teller Connect success message
  if (event.data?.type === 'TELLER_CONNECT_SUCCESS') {
    const { accessToken, accountId } = event.data.data;
    
    // Store for future use
    localStorage.setItem('phoenix_access_token', accessToken);
    localStorage.setItem('phoenix_account_id', accountId);
    
    console.log('Bank account connected successfully');
    
    // You might want to update your UI to show the bank is connected
    hidePayment();
  }
  // Handle transaction success message
  else if (event.data?.type === 'TRANSACTION_SUCCESS') {
    const { amount, token, chain, walletAddress, sendAmount, transactionHash, basescanLink } = event.data.data;
    
    console.log('Transaction successful:', transactionHash);
    console.log(`Amount: $${amount} ${token} on ${chain}`);
    console.log(`Transaction link: ${basescanLink}`);
    
    // You should store transaction details in your database
    // and update your UI to show the payment was successful
    hidePayment();
  }
}

// 3. Function to hide the payment iframe
// This cleans up the UI and removes event listeners
function hidePayment() {
  document.getElementById('payment-container').style.display = 'none';
  // IMPORTANT: Remove event listener to prevent memory leaks
  window.removeEventListener('message', handlePaymentMessage);
}
```

### Connecting Everything

Add this script to connect your form to the payment flow:

```javascript
// Set up the button click handler to start the payment process
document.getElementById('start-payment').addEventListener('click', function() {
  // Get values from form inputs
  const walletAddress = document.getElementById('wallet').value;
  const amount = document.getElementById('amount').value;
  
  // Get optional stored tokens (if available)
  const accessToken = localStorage.getItem('phoenix_access_token');
  const accountId = localStorage.getItem('phoenix_account_id');
  
  // Validate inputs (basic validation)
  if (!walletAddress || !amount) {
    alert('Please enter both wallet address and amount');
    return;
  }
  
  // Start payment process with collected values
  showPayment(walletAddress, amount, accessToken, accountId);
});